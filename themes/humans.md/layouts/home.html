{{ define "main" }}
  {{ .Content }}

  {{- $categories := slice "Setup" "Building" "Debugging" "Refining" -}}
  {{- $recentPosts := first 2 (site.RegularPages.ByDate.Reverse) -}}

  <div class="category-grid">
    {{- range $categories -}}
      {{- $category := . -}}
      {{- $posts := where site.RegularPages "Params.category" $category -}}
      {{- if $posts -}}
        <div class="category-column">
          <h2 class="category-title">{{ $category }}</h2>
          <ul class="post-list">
            {{- range $posts.ByDate.Reverse -}}
              <li class="post-item">
                <a href="{{ .RelPermalink }}" class="post-link">
                  <span class="post-title">{{ .LinkTitle }}</span>
                  <div class="post-meta">
                    <time class="post-date">{{ .Date.Format "Jan 2, 2006" }}</time>
                    {{- if in $recentPosts . -}}
                      <span class="post-badge post-badge-new">New</span>
                    {{- end -}}
                  </div>
                </a>
              </li>
            {{- end -}}
          </ul>
        </div>
      {{- end -}}
    {{- end -}}
  </div>
{{ end }}
